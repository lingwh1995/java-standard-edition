# 两阶段终止模式(Two-Phase Termination Pattern)
## 1.概念
    两阶段终止模式（Two-Phase Termination Pattern）是一种用于优雅地终止线程的设计模式。该模式的核心思想是，在终
    止线程时，先让线程有机会执行一些清理工作，然后再真正终止线程。这样可以避免线程突然终止导致资源泄漏或数据不一致的问题。
## 2.实现步骤
    第一阶段：请求终止
    给线程发送一个终止信号，系统接收到终止信号（例如用户输入、系统命令或其他形式的触发条件）。这个信号会通知程序开始准备关闭。
    程序设置一个终止标志，表明系统即将关闭。

    第二阶段：执行终止
    一旦终止标志被设置，系统将执行具体的终止操作。这可能包括关闭资源（如文件、网络连接）、停止服务、通知所有工作线
    程结束等。这个阶段的关键是确保所有关键资源都被正确释放，所有线程都能有序地终止。
## 3.考虑的因素
  ### 3.1. 优雅而非暴力的结束线程
  要考虑到使得该线程能够安全的结束，Thread中的stop会有问题的，这种方式很暴力，有可能导致死锁的发生。
  ### 3.2. 能够进行正常的终止处理
  一定能够进行正常的终止处理，在java中，这点可以使用finally来实现
  ### 3.3. 即使处于阻塞状态的线程也可以被立即中断
  收到终止后，当线程在wait或者sleep或者join的时候，不用等到时间到才终止，而是马上中断线程的这些状态，进而进行终止操作。
  ### 3.4. 不影响当前周期内的正常作业
  当一个线程正在执行周期性的工作时候，在“作业中”发了停止执行的请求，此时该线程不能马上离开停止，而应该先做完本次周期内部的工作，然后进入“善后阶段”完成一些善后的工作，所谓的两阶段终止，即中止“运作阶段”，并完成“善后阶段”，完整的完成执行绪的工作。